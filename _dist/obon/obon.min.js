!function(t){function i(e){if(s[e])return s[e].exports;var n=s[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var s={};return i.m=t,i.c=s,i.p="",i(0)}([function(t,i,s){var e=s(1);e.degree=s(21),window.obon=e},function(t,i,s){var e=s(2),n=s(7),h=s(17),o=s(18),r=s(19),a=function(t){var i=e.__cache[t];return i?i:e.__cache[t]=new n(t)};a.appendTo=function(t,i){var s=new n(null,i.w,i.h);return"object"==typeof t&&t.appendChild?t.appendChild(s.e):document.querySelector(t).appendChild(s.e),i.id&&(e.__cache[i.id]=s),s},a.select=function(t){return e.__cache[t]},a.view=function(){return(new h).init(arguments)},a.sprite=function(){return(new o).init(arguments)},a.responder=function(){return(new r).init(arguments)},t.exports=a},function(t,i,s){var e=s(3),n=s(4),h=s(5),o=s(6),r=0,a=function(){this.id=r++,this.mtx=h(),this.bounds=o(),this.x=0,this.y=0,this.r=0,this.sx=1,this.sy=1,this.color="rgba(0, 0, 0, 1)",this.hidden=!1,this.parent=1,this.canvas=null,this.draw=e};a.__cache={},a.prototype={init:function(t){var i=0,s=t.length;for(i;s>i;i++)n(this,t[i]);return"string"==typeof this.id&&(a.__cache[this.id]=this),this},__draw:function(t){var i=this.mtx.identity().scale(this.sx,this.sy).rotate(this.r).translate(this.x,this.y).concat(this.parent.mtx);t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty)},__update:function(){this.canvas&&this.canvas.update()},__addToCanvas:function(){},__removeFromCanvas:function(){},isHidden:function(){var t=function(i){return i?i.hidden?!0:t(i.parent):!1};return function(){return t(this)}}(),show:function(){return this.hidden=!1,this.__update(),this},hide:function(){return this.hidden=!0,this.__update(),this},attr:function(t,i){return t?("object"==typeof t?n(this,t):this[t]=i,this.__update(),this):void 0}},t.exports=a},function(t,i){t.exports=function(){return null}},function(t,i){var s=function(t,i){var e,n;for(e in i)n=i[e],"object"==typeof t[e]?s(t[e],n):t[e]=n;return t};t.exports=s},function(t,i){var s=function(t,i,s,e,n,h){this.a=t||1,this.b=i||0,this.c=s||0,this.d=e||1,this.tx=n||0,this.ty=h||0};s.prototype={translate:function(t,i){return this.tx=t,this.ty=i,this},scale:function(t,i){return this.a=this.a*t,this.b=this.b*i,this.c=this.c*t,this.d=this.d*i,this.tx=this.tx*t,this.ty=this.ty*i,this},rotate:function(t){this.getData();var i=Math.cos(t),s=Math.sin(t),e=-Math.sin(t),n=Math.cos(t),h=this.getData();return this.a=h.a*i+h.b*e,this.b=h.a*s+h.b*n,this.c=h.c*i+h.d*e,this.d=h.c*s+h.d*n,this.tx=h.tx*i+h.ty*e,this.ty=h.tx*s+h.ty*n,this},concat:function(t){var i=this.getData();return this.a=i.a*t.a+i.b*t.c,this.b=i.a*t.b+i.b*t.d,this.c=i.c*t.a+i.d*t.c,this.d=i.c*t.b+i.d*t.d,this.tx=i.tx*t.a+i.ty*t.c+t.tx,this.ty=i.tx*t.b+i.ty*t.d+t.ty,this},getData:function(){return{a:this.a,b:this.b,c:this.c,d:this.d,tx:this.tx,ty:this.ty}},clone:function(){return new s(this.a,this.b,this.c,this.d,this.tx,this.ty)},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var t=this.getData(),i=t.a*t.d-t.c*t.b;return this.a=t.d/i,this.b=-t.b/i,this.c=-t.c/i,this.d=t.a/i,this.tx=(t.c*t.ty-t.d*t.tx)/i,this.ty=(t.b*t.tx-t.a*t.ty)/i,this},trans:function(t,i){return{x:this.a*t+this.c*i+this.tx,y:this.b*t+this.d*i+this.ty}},transPoint:function(t){return this.trans(t.x,t.y)}},t.exports=function(t,i,e,n,h,o){return new s(t,i,e,n,h,o)}},function(t,i,s){var e=s(3),n=function(t,i,s,e){this.x=t||0,this.y=i||0,this.w=s||0,this.h=e||0,this.__setUnion()};n.prototype={contains:function(t,i){return t>this.x&&t<this.w+this.x&&i>this.y&&i<this.h+this.y},containsPoint:function(t){return this.contains(t.x,t.y)},get:function(){return{x:this.x,y:this.y,w:this.w,h:this.h}},right:function(){return this.w+this.x},bottom:function(){return this.h+this.y},empty:function(){this.x=this.y=this.w=this.h=0,this.union=this.__union1},union:e,__setUnion:function(){this.x|this.y|this.w|this.h?this.union=this.__union2:this.union=this.__union1},__union1:function(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this.union=this.__union2},__union2:function(t){var i,s;this.x>t.x?(i=this.x-t.x,s=i+this.w,this.w=s>t.w?s:t.w,this.x=t.x):(i=t.x-this.x,s=i+t.w,s>this.w&&(this.w=s)),this.y>t.y?(i=this.y-t.y,s=i+this.h,this.h=s>t.h?s:t.h,this.y=t.y):(i=t.y-this.y,s=i+t.h,s>this.h&&(this.h=s))}},t.exports=function(t,i,s,e){return new n(t,i,s,e)}},function(t,i,s){var e=s(3),n=s(8),h=s(9),o=s(11),r=s(12),a=s(14),c=s(5),u=s(13),d=s(15),_=function(t){return t||(t=function(t){setTimeout(t,o)}),t}(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),l=function(t,i,s){d.call(this),this.e=document.querySelector(t),this.e&&this.e.getContext||(this.e=document.createElement("canvas")),this.e.width=i||this.e.width||300,this.e.height=s||this.e.height||300,this.ctx=this.e.getContext("2d"),this.ctx?this.canvas=this:(this.canvas=null,this.draw=e),this.alpha=1,this.parent=1,this.mtx=c(),this.vec=u(),this.__alpha=1,this.__order=0,this.__d=0,this.__itcvs={},this.__cache={},this.__setEvent(),this.resize(this.e.width,this.e.height)};l.prototype={resize:function(t,i,s){t=t||300,i=i||300,s=window.devicePixelRatio,this.e.style.width=t+"px",this.e.style.height=i+"px",this.e.width=t*s,this.e.height=i*s,this.mtx.identity().scale(s,s),this.update()},update:function(){if(!this.__d){this.__d=1;var t=this;_(function(){t.__update()})}return this},__update:function(){var t=this.ctx;t.restore(),t.setTransform(1,0,0,1,0,0),t.globalAlpha=this.__alpha=this.alpha,t.clearRect(0,0,this.e.width,this.e.height),this.__d=0,this.__order=0,d.prototype.__draw.call(this,t)},__setEvent:function(){var t,i=this,s=this.e;h?(t=function(t){i.__touchEvent(t)},s.addEventListener("touchstart",t),s.addEventListener("touchmove",t),s.addEventListener("touchend",function(t){i.__touchEnd(t)})):(t=function(t){i.__mouseEvent(t)},s.addEventListener("mousemove",t),s.addEventListener("mousedown",t),s.addEventListener("mouseup",t))},__dispatchEvent:function(t,i,s,e){var n,h,o,r=-1,c=a(this.e);i="__"+i,c=this.mtx.trans(s-c.x,e-c.y);for(n in this.__itcvs)h=this.__itcvs[n],h.order>r&&h.interact(c,t)&&(o=h,r=h.order);o&&o[i](t)},__mouseEvent:function(t){var i=r();this.__dispatchEvent(t,t.type,this.vec.x=t.clientX+i.x,this.vec.y=t.clientY+i.y)},__touchEvent:function(t){this.__dispatchEvent(t,t.type,this.vec.x=t.touches[0].pageX,this.vec.y=t.touches[0].pageY)},__touchEnd:function(t){this.__dispatchEvent(t,t.type,this.vec.x,this.vec.y)}},t.exports=n(l,d)},function(t,i){t.exports=function(t,i){var s=t.prototype,e=i.prototype;for(var n in e)null==s[n]&&(s[n]=e[n]);return t}},function(t,i,s){var e=s(10);t.exports=e("iphone","ipod","ipad","android")},function(t,i){var s=window.navigator.userAgent.toLowerCase();t.exports=function(){var t=0,i=arguments.length;for(t;i>t;t++)if(s.indexOf(arguments[t])>-1)return!0;return!1}},function(t,i){t.exports=40},function(t,i,s){var e=s(13)();t.exports=function(){return e.x=window.scrollX,e.y=window.scrollY,e}},function(t,i){var s=function(t,i){this.x=t||0,this.y=i||0};s.prototype={length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t,i){return this.x===t&&this.y===i},equalsPoint:function(t){return this.equals(t.x,t.y)}},t.exports=function(t,i){return new s(t,i)}},function(t,i,s){var e=s(13),n=function(t,i){return t?(i.x+=t.offsetLeft,i.y+=t.offsetTop,n(t.offsetParent,i)):i};t.exports=function(t){return t.offsetParent?n(t.offsetParent,e(t.offsetLeft,t.offsetTop)):new e}},function(t,i,s){var e=s(16),n=function(){this.childs=[],this.__childUpdater=e(),this.__canvasUpdater=e()};n.prototype={append:function(){var t=0,i=arguments.length;for(t;i>t;t++)this.__append(arguments[t]);return this},__append:function(t){return t.depth&&t.parent.remove(t),t.__childUpdate||(t.__childUpdate=function(i){t.hidden||t.__draw(i)},t.__canvasUpdate=function(i){i?(t.canvas=i,t.__addToCanvas(i)):(t.__removeFromCanvas(i),delete t.canvas),t.__canvasUpdater&&t.__canvasUpdater.update([i])}),t.parent=this,t.depth=this.childs.length,this.childs.push(t),this.__childUpdater.add(t.__childUpdate),this.__canvasUpdater.add(t.__canvasUpdate),this.canvas&&(t.__canvasUpdate(this.canvas),this.canvas.update()),this},remove:function(t){return t.parent?(t.__canvasUpdate(),this.__childUpdater.dispose(t.__childUpdate),this.__canvasUpdater.dispose(t.__canvasUpdate),this.childs.splice(t.depth,1),t.depth!==this.childs.length-1&&this.__setOrder(),delete t.parent,delete t.depth,this.canvas&&this.canvas.update(),this):void 0},__setOrder:function(){var t,i,s=this.childs.length;for(t=s;t--;)i=this.childs[t],i.depth=t},__draw:function(t){this.__childUpdater.update([t])}},t.exports=n},function(t,i){"use strict";var s,e,n={update:function(){}},h=0;s=function(t,i,s){this.func=t,this.prev=i,this.next=s,this.available=!1},s.prototype={update:function(t){this.func.apply(null,t||[]),this.next.update(t)},reverse:function(t){this.func.apply(null,t||[]),this.prev.update(t)},release:function(){delete this.func,delete this.next,delete this.prev}},e=function(){h+=1,this.id=h,this.index=1,this.length=0,this.first=new s(function(){},n,n),this.current=this.first,this.list={}},e.prototype={update:function(t){this.first.update(t)},reverse:function(t){this.current.reverse(t)},add:function(t){var i,e;if(e=t["__coupling__"+this.id]){if(i=this.list[e],i.available)return;i.prev=this.current,i.next=n}else e=t["__coupling__"+this.id]=this.index++,i=this.list[e]=new s(t,this.current,n);return i.available=!0,this.current.next=i,this.current=i,this.length+=1,t},remove:function(t){var i,s;return(i=t["__coupling__"+this.id])?(s=this.list[i],s.available?(s.prev.next=s.next,s.next.prev=s.prev,this.current===s&&(this.current=s.prev),s.available=!1,this.length-=1,i):void 0):null},dispose:function(t){var i=this.remove(t);delete this.list[i],delete t["__coupling__"+this.id]},release:function(){var t,i,s=this.list;for(i in s)t=s[i],delete t.fc["__coupling__"+this.id],t.release();delete this.id,delete this.index,delete this.length,delete this.first,delete this.current,delete this.list}},t.exports=function(){return new e}},function(t,i,s){var e=s(8),n=s(2),h=function(){n.call(this),this.alpha=1,this.__alpha=1,this.shadowColor="rgba(0,0,0,0)",this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0};h.prototype={__draw:function(t){if(n.prototype.__draw.call(this,t),t.globalAlpha=this.__alpha=this.parent.__alpha*this.alpha,t.beginPath(),!this.shadowBlur&&this.parent.shadowBlur){var i=this.parent;t.shadowColor=i.shadowBlur,t.shadowBlur=i.shadowBlur,t.shadowOffsetX=i.shadowOffsetX,t.shadowOffsetY=i.shadowOffsetY}else t.shadowColor=this.shadowBlur?this.shadowColor:"rgba(0,0,0,0)",t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY;this.draw(t,this.bounds)},release:function(){delete this.__alpha,delete this.alpha,delete this.shadowColor,delete this.shadowBlur,delete this.shadowOffsetX,delete this.shadowOffsetY}},t.exports=e(h,n)},function(t,i,s){var e=s(8),n=s(17),h=s(15),o=function(){n.call(this),h.call(this)};o.prototype={__draw:function(t){n.prototype.__draw.call(this,t),h.prototype.__draw.call(this,t)}},e(o,n),e(o,h),t.exports=o},function(t,i,s){var e=s(3),n=s(9),h=s(8),o=s(20),r=s(17),a=s(5),c=function(){r.call(this),this.imtx=a(),this.order=0,this.isPointer=!1,this.mouseover=e,this.mouseout=e,this.mousedown=e,this.mousemove=e,this.mouseup=e,this.click=e,this.touchstart=e,this.touchmove=e,this.touchend=e,this.__flag=0,this.__notice=o()};c.prototype={on:function(t,i){return this.__notice.listen(t,i),this},interact:function(t,i){return!this.canvas||this.isHidden()?!1:this.__interact(this.bounds.containsPoint(this.imtx.transPoint(t)),i)},__interact:function(t,i){return n?t:(1&!this.__flag&&t&&(this.mouseover(i),this.__notice.publish("mouseover",[i]),this.__flag|=1,this.isPointer&&(this.canvas.e.style.cursor="pointer")),1&this.__flag&&!t&&(this.mouseout(i),this.__notice.publish("mouseout",[i]),this.__flag=0,this.isPointer&&(this.canvas.e.style.cursor=null)),t)},__draw:function(t){r.prototype.__draw.call(this,t),this.imtx=this.mtx.clone().invert(),this.order=this.canvas.__order++},__mousedown:function(t){this.mousedown(t),this.__notice.publish("mousedown",[t]),this.__flag|=2},__mousemove:function(t){this.mousemove(t),this.__notice.publish("mousemove",[t])},__mouseup:function(t){this.mouseup(t),this.__notice.publish("mouseup",[t]),2&this.__flag&&(this.click(t),this.__notice.publish("click",[t]),this.__flag^=2)},__touchstart:function(t){this.__flag|=2,this.touchstart(t),this.__notice.publish("touchstart",[t])},__touchmove:function(t){this.touchmove(t),this.__notice.publish("touchmove",[t])},__touchend:function(t){this.touchend(t),this.__notice.publish("touchend",[t]),2&this.__flag&&(this.__flag^=2,this.click(t),this.__notice.publish("click",[t]))},__addToCanvas:function(){this.canvas.__itcvs[this.id]=this},__removeFromCanvas:function(){delete this.canvas.__itcvs[this.id]},release:function(){r.prototype.release(),delete this.imtx,delete this.order,delete this.__flag,delete this.mouseover,delete this.mouseout,delete this.mousedown,delete this.mousemove,delete this.mouseup,delete this.click}},t.exports=h(c,r)},function(t,i,s){"use strict";var e,n=s(16);e=function(){this.cps={}},e.prototype={listen:function(t,i){var s=this.cps[t];return s||(s=this.cps[t]=n()),s.add(i),i},clear:function(t,i){var s=this.cps[t];s&&s.remove(i)},publish:function(t,i){var s=this.cps[t];s&&s.update(i)},release:function(){var t;for(t in this.cps)this.cps[t].release();delete this.cps}},t.exports=function(){return new e}},function(t,i){t.exports=function(t){return Math.PI*t/180}}]);